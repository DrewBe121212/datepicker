!function(a,t,e){"use strict";t.datepicker&&!t.datepicker.modifiedSetDate&&(t.datepicker._setDate=function(){var a=t.datepicker._setDate;return function(t){a.apply(this,arguments),t.input.trigger("change")}}(),t.datepicker.modifiedSetDate=!0),a.Datepicker=a.Datepicker||function(){var n="mm/dd/yy",d=".date-picker",i="date-picker-container",r="input[name]"+d,p="dp-pan",s="span.dp-pan",c=40,o=!1,l=function(a){var n=t(a).length&&t(a)||t(r),d=t("<div>").addClass(i+" pan-inputs"),s=t("<span>").addClass(p);n.each(function(){var a,n=t(this),i=D(n),r=t("<input>").attr({type:"hidden"}),p=0!==n.siblings(".hasDatepicker").length,c=t("<a>").attr("title","Clear the set date").addClass("clear-icon ui-icon ui-icon-triangle-1-ne").on("click",function(){return r.datepicker("setDate",""),!1}),o=function(a,t){var e,n=864e5;return a=new Date(a),t=new Date(t),e=Math.round(Math.abs((a.getTime()-t.getTime())/n))},l=function(a,t){return""!=a&&(a=new Date(a),a.setDate(a.getDate()+t)),a},m=function(){c.toggle(i.clearIcon&&!i.disabled&&null!==r.datepicker("getDate"))},u=function(){var a,n,d,p;n=r.val(),null!==i.dateSpanStart&&""!=n&&(n=new Date(n),a=t("#"+i.dateSpanStart),a.length>0&&(d=a.val(),""!==d&&(d=new Date(d),null!==i.maxDaySpan&&(p=o(n,d),p>i.maxDaySpan&&(d=l(n,-i.maxDaySpan))),d>n&&(d=n),d.getTime()!=new Date(a.val()).getTime()&&(a.data("datepicker_ID")!==e?t("#"+a.data("datepicker_ID")).datepicker("setDate",d):a.val(d))))),null!==i.dateSpanEnd&&""!=n&&(n=new Date(n),a=t("#"+i.dateSpanEnd),a.length>0&&(d=a.val(),""!=d&&(d=new Date(d),null!==i.maxDaySpan&&(p=o(n,d),p>i.maxDaySpan&&(d=l(n,i.maxDaySpan))),n>d&&(d=n),d.getTime()!=new Date(a.val()).getTime()&&(a.data("datepicker_ID")!==e?t("#"+a.data("datepicker_ID")).datepicker("setDate",d):a.val(d)))))};n.destroy=function(){var a=t("#"+t(this).data("datepicker_ID"));t(this).prop({readonly:!1,disabled:!1}),t(this).val(a.val()),a.datepicker("destroy"),t(this).siblings().remove(),t(this).unwrap(),t(this).attr("name",n.data("name"))},p&&n.destroy(),i.altField=n,r.data(n.data()),r.val(n.val()),r.attr("name",n.attr("name")),n.attr("id")!==e&&r.attr("id","dp_"+n.attr("id")),r.datepicker(i).on("change",m).on("change",u),a=r.datepicker("getDate"),"date"!==t.type(a)&&i.disabled?r.datepicker("setDate",k(new Date,r)):"date"===t.type(a)&&r.datepicker("setDate",k(a,r)),n.wrap(d.clone()).before(r).before(s.clone().addClass("left")).after(s.clone().addClass("right")).after(c).data("name",n.attr("name")).removeAttr("name").data("datepicker_ID",r.attr("id")).addClass("inset").prop({readonly:!0,disabled:i.disabled}),u(),m()})},D=function(a){var d={altField:null,altFormat:m(a.data("pan")).altFormat,changeMonth:!1,firstDay:1,dateFormat:m(a.data("pan")).displayFormat,onSelect:function(a,e){a!==e.lastVal&&t(this).trigger("change",[a,e])},disabled:"month"===a.data("pan")||"year"===a.data("pan"),showWeek:"week"===a.data("pan"),clearIcon:a.data("clearicon")!==e&&""!==t.trim(a.data("clearicon"))&&a.data("clearicon"),maxDaySpan:null,dateSpanStart:null,dateSpanEnd:null};return a.data("mindate")!==e&&""!==t.trim(a.data("mindate"))&&(d.minDate=t.datepicker.parseDate(n,a.data("mindate"))),a.data("maxdate")!==e&&""!==t.trim(a.data("maxdate"))&&(d.maxDate=t.datepicker.parseDate(n,a.data("maxdate"))),a.data("maxdayspan")!==e&&""!==t.trim(a.data("maxdayspan"))&&a.data("maxdayspan")>=0&&(d.maxDaySpan=a.data("maxdayspan")),a.data("datespanstart")!==e&&""!==t.trim(a.data("datespanstart"))&&t("[name="+a.data("datespanstart")+"]").length>0&&(d.dateSpanStart=a.data("datespanstart")),a.data("datespanend")!==e&&""!==t.trim(a.data("datespanend"))&&t("[name="+a.data("datespanend")+"]").length>0&&(d.dateSpanEnd=a.data("datespanend")),d},m=function(a){switch(a){case"month":return{altFormat:"M, yy",displayFormat:n};case"year":return{altFormat:"yy",displayFormat:n};default:return{altFormat:"D, M d, yy",displayFormat:n}}},u=function(){var e,n="."+i+" "+s;o||(t(a.document.body).on("click.date-picker",d,function(){var a=t(this),e=a.parent().children(".hasDatepicker");e.datepicker("show"),e.datepicker("widget").css("top",e.datepicker("widget").position().top+c)}),t(a.document.body).on({"mousedown.date-picker-pan":function(a){if(1===a.which){var n=t(this),d=500,i=75,r=function(a){var p,s=n.parent().children(".hasDatepicker"),c=s.data("pan")||"day",o=s.datepicker("getDate"),l=n.hasClass("right"),D=s.datepicker("option","minDate"),m=s.datepicker("option","maxDate");if("date"===t.type(o))switch(c.toLowerCase()){case"week":var u=(o.getDay()+6)%7;o.setDate(o.getDate()-u),p=new Date(o),l?(o.setDate(o.getDate()+7),m&&o>m&&(o=p)):(o.setDate(o.getDate()-7),D&&D>o&&(o=p));break;case"month":o.setMonth(l?o.getMonth()+1:o.getMonth()-1);break;case"year":o.setFullYear(l?o.getFullYear()+1:o.getFullYear()-1);break;default:o.setDate(l?o.getDate()+1:o.getDate()-1)}o=k(o,n),o&&(s.datepicker("setDate",o),e=setTimeout(r,a||d)),d>i&&(d+=d/7*-1)};r(500)}},"mouseup.date-picker-pan":function(){clearTimeout(e)},"mouseleave.date-picker-pan":function(){clearTimeout(e)}},n),o=!0)},k=function(a,e){var n,d,i,r,p,s=e.data("pan")||"",c=e.datepicker("option","minDate"),o=e.datepicker("option","maxDate");if("date"===t.type(a))switch(s){case"month":a.setDate(1);break;case"year":a.setMonth(0,1);break;case"week":c&&(d=new Date(c),i=(c.getDay()+6)%7,d.setDate(d.getDate()-i),c>d&&d.setDate(d.getDate()+7)),o&&(r=new Date(o),p=(o.getDay()+6)%7,r.setDate(r.getDate()-p),r>o&&r.setDate(r.getDate()-7)),n=(a.getDay()+6)%7,a.setDate(a.getDate()-n),c&&d>a?a=d:o&&a>r&&(a=r)}return a};return{init:function(a){l(a),u()}}}(),t(function(){a.Datepicker.init()})}(window,jQuery);
